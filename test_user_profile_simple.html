<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <title>ØªØ³Øª ÙÙˆØ±ÛŒ User Profile</title>
    <style>
        body { font-family: Tahoma; padding: 20px; }
        .success { color: green; background: #e8f5e9; padding: 10px; margin: 5px 0; border-right: 4px solid green; }
        button { background: #2196f3; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h2>âœ… ØªØ³Øª ÙÙˆØ±ÛŒ User Profile Manager</h2>
    <button onclick="runTest()">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
    <div id="results"></div>

    <script>
        // ğŸ”¹ Ú©Ø¯ Ú©Ø§Ù…Ù„ UserProfileManager (Ù†Ø³Ø®Ù‡ Ø³Ø§Ø¯Ù‡â€ŒØ´Ø¯Ù‡)
        class UserProfileManager {
            constructor() {
                this.userId = 'test_user_001';
                this.cache = new Map();
            }

            async getBasicInfo() {
                return {
                    id: this.userId,
                    fullName: 'Ú©Ø§Ø±Ø¨Ø± Ù†Ù…ÙˆÙ†Ù‡',
                    email: 'test@vakamova.com',
                    country: 'IR',
                    joinDate: new Date().toISOString(),
                    lastSeen: new Date().toISOString()
                };
            }

            async getLearningLanguages() {
                return [
                    { code: 'en', name: 'English', level: 'intermediate', progress: 65 },
                    { code: 'fa', name: 'ÙØ§Ø±Ø³ÛŒ', level: 'native', progress: 100 }
                ];
            }

            async getSubscriptionInfo() {
                return {
                    type: 'premium',
                    expiryDate: new Date(Date.now() + 180 * 24 * 60 * 60 * 1000).toISOString(),
                    price: 49000,
                    currency: 'IRT'
                };
            }

            async getStats() {
                return {
                    totalMinutes: 1250,
                    currentStreak: 7,
                    accuracy: 85,
                    level: 5,
                    xp: 4500
                };
            }
        }

        // ğŸ”¹ ØªØ§Ø¨Ø¹ ØªØ³Øª
        async function runTest() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h3>Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª...</h3>';
            
            try {
                const manager = new UserProfileManager();
                const results = [];
                
                // ØªØ³Øª 1: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
                const basicInfo = await manager.getBasicInfo();
                results.push(`âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡: ${basicInfo.fullName} (${basicInfo.email})`);
                
                // ØªØ³Øª 2: Ø²Ø¨Ø§Ù†â€ŒÙ‡Ø§
                const languages = await manager.getLearningLanguages();
                results.push(`âœ… Ø²Ø¨Ø§Ù†â€ŒÙ‡Ø§: ${languages.length} Ø²Ø¨Ø§Ù† (${languages.map(l => l.name).join(', ')})`);
                
                // ØªØ³Øª 3: Ø§Ø´ØªØ±Ø§Ú©
                const subscription = await manager.getSubscriptionInfo();
                results.push(`âœ… Ø§Ø´ØªØ±Ø§Ú©: ${subscription.type} (${subscription.price} ${subscription.currency})`);
                
                // ØªØ³Øª 4: Ø¢Ù…Ø§Ø±
                const stats = await manager.getStats();
                results.push(`âœ… Ø¢Ù…Ø§Ø±: Ø³Ø·Ø­ ${stats.level}ØŒ ${stats.totalMinutes} Ø¯Ù‚ÛŒÙ‚Ù‡ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ`);
                
                // Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
                resultsDiv.innerHTML = `
                    <h3 style="color: green;">ğŸ‰ ØªØ³Øª Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯!</h3>
                    ${results.map(r => `<div class="success">${r}</div>`).join('')}
                    <p><strong>User Profile Manager Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</strong></p>
                `;
                
            } catch (error) {
                resultsDiv.innerHTML = `
                    <h3 style="color: red;">âŒ Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª</h3>
                    <div class="error">${error.message}</div>
                    <p>Ù„Ø·ÙØ§Ù‹ Ú©Ù†Ø³ÙˆÙ„ Ù…Ø±ÙˆØ±Ú¯Ø± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ (F12 â†’ Console)</p>
                `;
                console.error('Ø®Ø·Ø§ÛŒ ØªØ³Øª:', error);
            }
        }
    </script>
</body>
</html>
