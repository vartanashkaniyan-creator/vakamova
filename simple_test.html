<!DOCTYPE html>
<html dir="rtl">
<head>
    <title>ุชุณุช ุณุงุฏู EventBus</title>
    <style>
        body { font-family: Tahoma; padding: 20px; }
        button { padding: 15px; margin: 10px; font-size: 16px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>๐งช ุชุณุช HyperEventBus</h1>
    
    <button onclick="test1()">โ ุชุณุช ฑ: ุจุงุฑฺฏุฐุงุฑ</button>
    <button onclick="test2()">โ ุชุณุช ฒ: ุณุงุฎุช ููููู</button>
    <button onclick="test3()">โ ุชุณุช ณ: ุงุฑุณุงู ุฑูุฏุงุฏ</button>
    <button onclick="test4()">โ ุชุณุช ด: Once Listener</button>
    
    <div id="result" style="margin-top: 30px; padding: 20px; border: 1px solid #ccc;">
        ูุชุงุฌ ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดูุฏ...
    </div>

    <!-- ุงูู ูุงู ุงุตู ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉู -->
    <script src="event_bus.js"></script>
    
    <script>
        const result = document.getElementById('result');
        
        function show(msg, type = '') {
            const p = document.createElement('p');
            p.innerHTML = msg;
            p.className = type;
            result.appendChild(p);
        }
        
        function test1() {
            result.innerHTML = '';
            if (typeof HyperEventBus !== 'undefined') {
                show('โ HyperEventBus ุจุงุฑฺฏุฐุงุฑ ุดุฏ', 'success');
            } else {
                show('โ HyperEventBus ูพุฏุง ูุดุฏ', 'error');
            }
        }
        
        function test2() {
            result.innerHTML = '';
            try {
                const bus = new HyperEventBus();
                show('โ ููููู EventBus ุณุงุฎุชู ุดุฏ', 'success');
                show('ูุชุฏูุง ููุฌูุฏ: ' + Object.keys(bus).join(', '));
            } catch (e) {
                show('โ ุฎุทุง: ' + e.message, 'error');
            }
        }
        
        function test3() {
            result.innerHTML = '';
            try {
                const bus = new HyperEventBus();
                let received = '';
                
                bus.on('ุณูุงู', (data) => {
                    received = data;
                });
                
                bus.emit('ุณูุงู', 'ุณูุงู ุฏูุง!');
                
                if (received === 'ุณูุงู ุฏูุง!') {
                    show('โ ุฑูุฏุงุฏ ุงุฑุณุงู ู ุฏุฑุงูุช ุดุฏ: ' + received, 'success');
                } else {
                    show('โ ุฏุฑุงูุช ุดฺฉุณุช ุฎูุฑุฏ', 'error');
                }
            } catch (e) {
                show('โ ุฎุทุง: ' + e.message, 'error');
            }
        }
        
        function test4() {
            result.innerHTML = '';
            try {
                const bus = new HyperEventBus();
                let count = 0;
                
                bus.once('ุชุณุช-ฺฉุจุงุฑ', () => {
                    count++;
                });
                
                bus.emit('ุชุณุช-ฺฉุจุงุฑ');
                bus.emit('ุชุณุช-ฺฉุจุงุฑ'); // ุงู ูุจุงุฏ ุจุดูุงุฑุฏ
                
                if (count === 1) {
                    show('โ Once Listener ฺฉุงุฑ ฺฉุฑุฏ (' + count + ' ุจุงุฑ)', 'success');
                } else {
                    show('โ Once Listener ุดฺฉุณุช ุฎูุฑุฏ (' + count + ' ุจุงุฑ)', 'error');
                }
            } catch (e) {
                show('โ ุฎุทุง: ' + e.message, 'error');
            }
        }
        
        // ููุช ุตูุญู ุจุงุฑฺฏุฐุงุฑ ุดุฏ
        window.onload = function() {
            if (typeof HyperEventBus !== 'undefined') {
                show('โ EventBus ุขูุงุฏู ุงุณุช. ุฏฺฉููโูุง ุชุณุช ุฑุง ุจุฒูุฏ.', 'success');
            } else {
                show('โ EventBus ุจุงุฑฺฏุฐุงุฑ ูุดุฏ!', 'error');
            }
        };
    </script>
</body>
</html>
