<!DOCTYPE html>
<html>
<head><title>ØªØ³ØªØ± ØªÚ©ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Vakamova</title>
<style>
body {font-family: sans-serif; padding: 20px; background: #f5f5f5;}
.module {background: white; margin: 10px; padding: 15px; border-radius: 8px; border: 1px solid #ddd;}
button {margin: 5px; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer;}
.load {background: #4CAF50; color: white;} .methods {background: #2196F3; color: white;}
.events {background: #9C27B0; color: white;} .deps {background: #FF9800; color: white;}
.log {margin-top: 10px; padding: 10px; background: #eee; border-radius: 4px; font-family: monospace;}
.success {color: green;} .error {color: red;}
</style>
</head>
<body>
<h2>ğŸ§ª ØªØ³ØªØ± ØªÚ©â€ŒÙØ§ÛŒÙ„ÛŒ Vakamova</h2>

<div id="modules">
    <!-- Ù„ÛŒØ³Øª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
</div>

<script>
// Ù„ÛŒØ³Øª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªÙˆ (ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†)
const files = [
    'core/event_bus.js',
    'core/state_manager.js',
    'core/api_client.js',
    'modules/auth/auth_manager.js',
    'modules/lessons/lesson_engine.js',
    'pages/home/page.js'
];

// ØªØ³ØªØ± Ø§ØµÙ„ÛŒ
async function testFile(file, testType) {
    const log = document.getElementById(`log-${btoa(file)}`);
    log.innerHTML = 'â³ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª...';
    
    try {
        // 1. Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ§ÛŒÙ„
        await loadScript(file);
        log.innerHTML += '<br>âœ… ÙØ§ÛŒÙ„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯';
        
        // 2. Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª
        let result = '';
        switch(testType) {
            case 'load':
                result = 'Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÙˆÙÙ‚';
                break;
            case 'methods':
                result = await testMethods(file);
                break;
            case 'events':
                result = await testEvents(file);
                break;
            case 'deps':
                result = getDeps(file);
                break;
        }
        log.innerHTML += `<br><span class="success">${result}</span>`;
    } catch(err) {
        log.innerHTML += `<br><span class="error">âŒ Ø®Ø·Ø§: ${err.message}</span>`;
    }
}

// Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ§ÛŒÙ„ JS
function loadScript(src) {
    return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = src;
        script.onload = () => resolve();
        script.onerror = () => reject(new Error(`Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ${src}`));
        document.head.appendChild(script);
    });
}

// ØªØ³Øª Ù…ØªØ¯Ù‡Ø§ (Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø³Ù… ÙØ§ÛŒÙ„)
function testMethods(file) {
    if(file.includes('event_bus')) {
        if(window.eventBus && eventBus.emit) return 'EventBus: emit, on, off OK';
    }
    if(file.includes('state_manager')) {
        if(window.HyperStateManager) return 'StateManager: Class OK';
    }
    if(file.includes('auth_manager')) {
        if(window.auth_manager) return 'AuthManager: Functions OK';
    }
    return 'Ù…ØªØ¯Ù‡Ø§ Ù¾ÛŒØ¯Ø§ Ø´Ø¯Ù†Ø¯';
}

// ØªØ³Øª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§
function testEvents(file) {
    if(file.includes('event_bus')) {
        return 'Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§: active';
    }
    return 'Ø±ÙˆÛŒØ¯Ø§Ø¯: N/A';
}

// ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§
function getDeps(file) {
    const deps = {
        'core/state_manager.js': 'ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡: event_bus.js',
        'modules/auth/auth_manager.js': 'ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡: event_bus.js, state_manager.js',
        'pages/home/page.js': 'ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡: state_manager.js, router.js'
    };
    return deps[file] || 'ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ…ÛŒ Ù†Ø¯Ø§Ø±Ø¯';
}

// Ø³Ø§Ø®Øª Ù„ÛŒØ³Øª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
files.forEach(file => {
    const div = document.createElement('div');
    div.className = 'module';
    div.innerHTML = `
        <h3>ğŸ“„ ${file.split('/').pop()}</h3>
        <button class="load" onclick="testFile('${file}', 'load')">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ</button>
        <button class="methods" onclick="testFile('${file}', 'methods')">Ù…ØªØ¯Ù‡Ø§</button>
        <button class="events" onclick="testFile('${file}', 'events')">Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§</button>
        <button class="deps" onclick="testFile('${file}', 'deps')">ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§</button>
        <div id="log-${btoa(file)}" class="log"></div>
    `;
    document.getElementById('modules').appendChild(div);
});
</script>
</body>
</html>
