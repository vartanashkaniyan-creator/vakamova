<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª API - Ø¨Ø®Ø´ 1: Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§</title>
    <style>
        body {
            font-family: Vazir, sans-serif;
            background: #f5f7fa;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #4f46e5;
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .test {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e2e8f0;
        }
        
        .test-title {
            font-weight: bold;
            font-size: 18px;
            color: #1e293b;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .test-desc {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        button {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-family: Vazir;
            font-size: 14px;
            margin: 5px;
        }
        
        button:hover {
            background: #4338ca;
        }
        
        .result {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 13px;
            display: none;
        }
        
        .success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
            display: block;
        }
        
        .error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
            display: block;
        }
        
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #e2e8f0;
            border-top-color: #4f46e5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .stats {
            background: #4f46e5;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ØªØ³Øª API Client - Ø¨Ø®Ø´ 1: Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§</h1>
        
        <div class="test" id="test1">
            <div class="test-title">
                <span>ØªØ³Øª 1: Ø§ÛŒØ¬Ø§Ø¯ API Client</span>
                <span id="status1">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
            </div>
            <div class="test-desc">
                Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ ØµØ­ÛŒØ­ Ø´ÛŒ ApiClient Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡
            </div>
            <button onclick="runTest(1)">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <div id="result1" class="result"></div>
        </div>
        
        <div class="test" id="test2">
            <div class="test-title">
                <span>ØªØ³Øª 2: Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ø³Ø§Ø¯Ù‡</span>
                <span id="status2">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
            </div>
            <div class="test-desc">
                Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø² Ø³Ø±ÙˆØ± (Mock)
            </div>
            <button onclick="runTest(2)">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <div id="result2" class="result"></div>
        </div>
        
        <div class="test" id="test3">
            <div class="test-title">
                <span>ØªØ³Øª 3: Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST Ø¨Ø§ Ø¯Ø§Ø¯Ù‡</span>
                <span id="status3">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
            </div>
            <div class="test-desc">
                Ø§Ø±Ø³Ø§Ù„ Ø¯Ø§Ø¯Ù‡ Ù„Ø§Ú¯ÛŒÙ† Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù†
            </div>
            <button onclick="runTest(3)">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <div id="result3" class="result"></div>
        </div>
        
        <button onclick="runAllTests()" style="width: 100%; padding: 15px; font-size: 16px; margin-top: 20px;">
            Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§
        </button>
        
        <div class="stats">
            <div>Ù…ÙˆÙÙ‚: <span id="passed">0</span> | Ù†Ø§Ù…ÙˆÙÙ‚: <span id="failed">0</span> | Ú©Ù„: 3</div>
        </div>
    </div>

    <script>
        // ===== API Client Ø³Ø§Ø¯Ù‡ =====
        class ApiClient {
            constructor() {
                this.baseURL = 'https://api.vakamova.test';
            }
            
            async get(endpoint) {
                await this.delay(300);
                return {
                    success: true,
                    data: [
                        { id: 1, name: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', email: 'ali@example.com' },
                        { id: 2, name: 'ÙØ§Ø·Ù…Ù‡ Ú©Ø±ÛŒÙ…ÛŒ', email: 'fatemeh@example.com' }
                    ]
                };
            }
            
            async post(endpoint, data) {
                await this.delay(400);
                
                if (endpoint === '/auth/login') {
                    return {
                        success: true,
                        data: {
                            token: 'mock_token_' + Date.now(),
                            user: { id: 1, name: 'Ú©Ø§Ø±Ø¨Ø± ØªØ³Øª', email: data.email }
                        }
                    };
                }
                
                return { success: true, data: { message: 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯' } };
            }
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // ===== ØªØ³Øªâ€ŒÙ‡Ø§ =====
        const tests = [
            {
                id: 1,
                run: async () => {
                    const api = new ApiClient();
                    if (!api.baseURL) throw new Error('baseURL ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡');
                    if (!api.get || typeof api.get !== 'function') throw new Error('Ù…ØªØ¯ get ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯');
                    if (!api.post || typeof api.post !== 'function') throw new Error('Ù…ØªØ¯ post ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯');
                    return 'âœ… ApiClient Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯';
                }
            },
            {
                id: 2,
                run: async () => {
                    const api = new ApiClient();
                    const result = await api.get('/users');
                    
                    if (!result.success) throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                    if (!result.data) throw new Error('Ø¯ÛŒØªØ§ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    if (!Array.isArray(result.data)) throw new Error('ÙØ±Ù…Øª Ø¯ÛŒØªØ§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
                    if (result.data.length === 0) throw new Error('Ø¯ÛŒØªØ§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª');
                    
                    return `âœ… Ø¯Ø±ÛŒØ§ÙØª ${result.data.length} Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª`;
                }
            },
            {
                id: 3,
                run: async () => {
                    const api = new ApiClient();
                    const data = { email: 'test@vakamova.com', password: '123456' };
                    const result = await api.post('/auth/login', data);
                    
                    if (!result.success) throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                    if (!result.data.token) throw new Error('ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    if (!result.data.user) throw new Error('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    
                    return `âœ… Ù„Ø§Ú¯ÛŒÙ† Ù…ÙˆÙÙ‚ - ØªÙˆÚ©Ù†: ${result.data.token.substring(0, 15)}...`;
                }
            }
        ];

        // ===== Ù…Ø¯ÛŒØ±ÛŒØª ØªØ³Øªâ€ŒÙ‡Ø§ =====
        let passed = 0;
        let failed = 0;
        
        function updateStats() {
            document.getElementById('passed').textContent = passed;
            document.getElementById('failed').textContent = failed;
        }
        
        async function runTest(testId) {
            const test = tests.find(t => t.id === testId);
            if (!test) return;
            
            const btn = document.querySelector(`#test${testId} button`);
            const status = document.getElementById(`status${testId}`);
            const resultDiv = document.getElementById(`result${testId}`);
            
            // Ø°Ø®ÛŒØ±Ù‡ Ù…ØªÙ† Ø§ØµÙ„ÛŒ Ø¯Ú©Ù…Ù‡
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span>Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...';
            status.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...';
            resultDiv.className = 'result';
            resultDiv.textContent = '';
            
            try {
                const startTime = Date.now();
                const result = await test.run();
                const time = Date.now() - startTime;
                
                resultDiv.className = 'result success';
                resultDiv.innerHTML = `âœ… ${result}<br><small>Ø²Ù…Ø§Ù†: ${time}ms</small>`;
                status.textContent = 'Ù…ÙˆÙÙ‚';
                status.style.color = '#10b981';
                
                passed++;
                
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ Ø®Ø·Ø§: ${error.message}`;
                status.textContent = 'Ù†Ø§Ù…ÙˆÙÙ‚';
                status.style.color = '#ef4444';
                
                failed++;
            }
            
            btn.disabled = false;
            btn.textContent = originalText;
            updateStats();
        }
        
        async function runAllTests() {
            passed = 0;
            failed = 0;
            updateStats();
            
            // Ø±ÛŒØ³Øª ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`status${i}`).textContent = 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±';
                document.getElementById(`status${i}`).style.color = '';
                document.getElementById(`result${i}`).className = 'result';
                document.getElementById(`result${i}`).textContent = '';
            }
            
            // Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨
            for (const test of tests) {
                await runTest(test.id);
                await delay(500); // ÙˆÙ‚ÙÙ‡ Ø¨ÛŒÙ† ØªØ³Øªâ€ŒÙ‡Ø§
            }
        }
        
        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', () => {
            console.log('âœ… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API Ø¨Ø®Ø´ 1 Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø¬Ø±Ø§ Ù‡Ø³ØªÙ†Ø¯');
        });
    </script>
</body>
</html>
