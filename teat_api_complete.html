<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ… API Ùˆ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ - Vakamova</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        .api-badge {
            background: #10b981;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
        }
        .test-container {
            padding: 25px;
        }
        .test-section {
            background: #f8fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border: 2px solid #e2e8f0;
        }
        .test-section h2 {
            color: #7c3aed;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .test-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #e2e8f0;
            transition: all 0.3s;
        }
        .test-item.passed {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        .test-item.failed {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        .test-item.network {
            border-left-color: #f59e0b;
            background: #fefce8;
        }
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .test-title {
            font-weight: 600;
            color: #1f2937;
            flex: 1;
        }
        .test-network {
            font-size: 0.8rem;
            background: #f59e0b;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            margin-right: 10px;
        }
        .test-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        .status-passed {
            background: #d1fae5;
            color: #065f46;
        }
        .status-failed {
            background: #fee2e2;
            color: #991b1b;
        }
        .test-output {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            background: #1e293b;
            color: #e2e8f0;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            overflow-x: auto;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .test-output.success {
            background: #0f766e;
        }
        .test-output.error {
            background: #7f1d1d;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 25px;
            background: #f8fafc;
            border-top: 2px solid #e2e8f0;
        }
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        #run-tests {
            background: linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%);
            color: white;
        }
        #run-tests:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.4);
        }
        #run-tests:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        #clear-results, #export-results, #run-network {
            background: #6b7280;
            color: white;
        }
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            padding: 20px;
            background: #f1f5f9;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        @media (max-width: 992px) {
            .stats {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        @media (max-width: 576px) {
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        .stat-box {
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9rem;
            color: #64748b;
        }
        .success { color: #10b981; }
        .failure { color: #ef4444; }
        .pending { color: #f59e0b; }
        .network-color { color: #f59e0b; }
        
        .api-simulator {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 768px) {
            .api-simulator {
                grid-template-columns: 1fr;
            }
        }
        .api-simulator h3 {
            color: #4f46e5;
            margin-bottom: 15px;
            grid-column: 1 / -1;
        }
        .sim-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .sim-controls button {
            padding: 10px;
            font-size: 0.9rem;
            justify-content: flex-start;
        }
        .api-visualizer {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            overflow: auto;
            max-height: 300px;
        }
        .request { color: #60a5fa; }
        .response { color: #34d399; }
        .error { color: #f87171; }
        
        .network-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .network-controls button {
            flex: 1;
            padding: 8px;
            font-size: 0.8rem;
            min-width: 120px;
        }
        
        @media (max-width: 768px) {
            .test-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .controls {
                flex-direction: column;
            }
            button {
                width: 100%;
                justify-content: center;
            }
        }
        
        .performance-chart {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .chart-bar {
            height: 20px;
            background: linear-gradient(90deg, #7c3aed, #8b5cf6);
            border-radius: 10px;
            margin-bottom: 8px;
            transition: width 0.5s ease;
        }
        
        .chart-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .network-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8fafc;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-online {
            background: #10b981;
            box-shadow: 0 0 10px #10b981;
        }
        
        .status-offline {
            background: #ef4444;
            box-shadow: 0 0 10px #ef4444;
        }
        
        .status-slow {
            background: #f59e0b;
            box-shadow: 0 0 10px #f59e0b;
        }
        
        .method-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .method-get { background: #10b981; color: white; }
        .method-post { background: #3b82f6; color: white; }
        .method-put { background: #f59e0b; color: white; }
        .method-delete { background: #ef4444; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸŒ ØªØ³Øª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ… API Ùˆ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ - Vakamova</h1>
            <p>Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø§Ù…Ø¹ API ClientØŒ Network ManagementØŒ Sync Engine Ùˆ Error Handling</p>
            <div class="api-badge">Ø´Ø¨Ú©Ù‡ Ùˆ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ</div>
        </header>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-value success" id="passed-count">0</div>
                <div class="stat-label">Ù…ÙˆÙÙ‚</div>
            </div>
            <div class="stat-box">
                <div class="stat-value failure" id="failed-count">0</div>
                <div class="stat-label">Ù†Ø§Ù…ÙˆÙÙ‚</div>
            </div>
            <div class="stat-box">
                <div class="stat-value network-color" id="network-count">0</div>
                <div class="stat-label">ØªØ³Øª Ø´Ø¨Ú©Ù‡</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="request-count">0</div>
                <div class="stat-label">Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§</div>
            </div>
            <div class="stat-box">
                <div class="stat-value pending" id="pending-count">0</div>
                <div class="stat-label">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
            </div>
        </div>
        
        <div class="api-simulator">
            <h3>ğŸ® Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² API Ùˆ Ø´Ø¨Ú©Ù‡</h3>
            
            <div class="sim-controls">
                <div class="network-status">
                    <span class="status-indicator status-online" id="network-indicator"></span>
                    <span id="network-status-text">Ø¢Ù†Ù„Ø§ÛŒÙ† - Ø³Ø±Ø¹Øª Ø¹Ø§Ø¯ÛŒ</span>
                </div>
                
                <button onclick="simulateGetRequest()" style="background: #10b981;">
                    <span>ğŸ“¡</span> Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET
                </button>
                <button onclick="simulatePostRequest()" style="background: #3b82f6;">
                    <span>ğŸ“¤</span> Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST
                </button>
                <button onclick="simulateErrorRequest()" style="background: #ef4444;">
                    <span>âš ï¸</span> Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ø®Ø·Ø§
                </button>
                <button onclick="simulateAuthRequest()" style="background: #8b5cf6;">
                    <span>ğŸ”</span> Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
                </button>
                
                <div class="network-controls">
                    <button onclick="setNetworkOnline()" style="background: #10b981;">
                        <span>âœ…</span> Ø´Ø¨Ú©Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†
                    </button>
                    <button onclick="setNetworkOffline()" style="background: #ef4444;">
                        <span>âŒ</span> Ø´Ø¨Ú©Ù‡ Ø¢ÙÙ„Ø§ÛŒÙ†
                    </button>
                    <button onclick="setNetworkSlow()" style="background: #f59e0b;">
                        <span>ğŸŒ</span> Ø´Ø¨Ú©Ù‡ Ú©Ù†Ø¯
                    </button>
                </div>
                
                <div style="margin-top: 15px; padding: 10px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 0.9rem; color: #64748b; margin-bottom: 5px;">Ø¢Ø®Ø±ÛŒÙ† Ù¾Ø§Ø³Ø®:</div>
                    <div id="current-response" style="font-family: monospace; color: #4f46e5;">Ù‡ÛŒÚ† Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡</div>
                </div>
            </div>
            
            <div class="api-visualizer" id="api-visualizer">
                // Ù„Ø§Ú¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                {
                  "system": "api-simulator",
                  "status": "ready",
                  "requests": []
                }
            </div>
        </div>
        
        <div class="test-container" id="test-container">
            <!-- ØªØ³Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </div>
        
        <div class="controls">
            <button id="run-tests">
                <span>ğŸš€</span>
                Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§
            </button>
            <button id="run-network">
                <span>ğŸŒ</span>
                ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡
            </button>
            <button id="export-results">
                <span>ğŸ’¾</span>
                Ø°Ø®ÛŒØ±Ù‡ Ù†ØªØ§ÛŒØ¬
            </button>
            <button id="clear-results">
                <span>ğŸ”„</span>
                Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬
            </button>
        </div>
    </div>

    <script>
        // ============ Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ù„Ø§Ú¯ Ø´Ø¨Ú©Ù‡ ============
        class NetworkLogger {
            constructor() {
                this.logs = [];
                this.requests = [];
                this.maxRequests = 50;
                this.networkStatus = 'online';
                this.networkSpeed = 'normal';
            }
            
            logRequest(method, url, data = null) {
                const request = {
                    id: `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    method,
                    url,
                    data,
                    timestamp: new Date().toISOString(),
                    status: 'pending',
                    startTime: performance.now()
                };
                
                this.requests.unshift(request); // Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ø¯Ø± Ø§Ø¨ØªØ¯Ø§
                if (this.requests.length > this.maxRequests) {
                    this.requests.pop();
                }
                
                this.logs.push({
                    type: 'request',
                    ...request
                });
                
                console.log(`[API Request] ${method} ${url}`, data || '');
                return request;
            }
            
            logResponse(requestId, response, statusCode = 200) {
                const request = this.requests.find(r => r.id === requestId);
                if (!request) return null;
                
                const endTime = performance.now();
                const duration = endTime - request.startTime;
                
                request.response = response;
                request.statusCode = statusCode;
                request.status = 'completed';
                request.duration = duration;
                request.endTime = endTime;
                
                this.logs.push({
                    type: 'response',
                    requestId,
                    response,
                    statusCode,
                    duration,
                    timestamp: new Date().toISOString()
                });
                
                console.log(`[API Response] ${statusCode} in ${duration.toFixed(2)}ms`, response);
                return request;
            }
            
            logError(requestId, error, statusCode = null) {
                const request = this.requests.find(r => r.id === requestId);
                if (!request) return null;
                
                const endTime = performance.now();
                const duration = endTime - request.startTime;
                
                request.error = error;
                request.statusCode = statusCode || 500;
                request.status = 'error';
                request.duration = duration;
                request.endTime = endTime;
                
                this.logs.push({
                    type: 'error',
                    requestId,
                    error,
                    statusCode: request.statusCode,
                    duration,
                    timestamp: new Date().toISOString()
                });
                
                console.error(`[API Error] ${error.message} (${duration.toFixed(2)}ms)`);
                return request;
            }
            
            setNetworkStatus(status, speed = 'normal') {
                this.networkStatus = status;
                this.networkSpeed = speed;
                
                this.logs.push({
                    type: 'network_change',
                    status,
                    speed,
                    timestamp: new Date().toISOString()
                });
                
                console.log(`[Network] Status: ${status}, Speed: ${speed}`);
            }
            
            getStats() {
                const completedRequests = this.requests.filter(r => r.status === 'completed');
                const errorRequests = this.requests.filter(r => r.status === 'error');
                const pendingRequests = this.requests.filter(r => r.status === 'pending');
                
                const avgDuration = completedRequests.length > 0
                    ? completedRequests.reduce((sum, r) => sum + r.duration, 0) / completedRequests.length
                    : 0;
                
                return {
                    totalRequests: this.requests.length,
                    completed: completedRequests.length,
                    errors: errorRequests.length,
                    pending: pendingRequests.length,
                    avgDuration,
                    networkStatus: this.networkStatus,
                    networkSpeed: this.networkSpeed
                };
            }
            
            getRecentRequests(limit = 10) {
                return this.requests.slice(0, limit);
            }
            
            clear() {
                this.requests = [];
                this.logs = [];
            }
        }

        // ============ Mock Ø³ÛŒØ³ØªÙ… API Client ============
        class MockAPIClient {
            constructor() {
                this.baseURL = 'https://api.vakamova.com/v1';
                this.headers = {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                    'X-App-Version': '1.0.0'
                };
                this.authToken = null;
                this.networkLogger = new NetworkLogger();
                this.requestQueue = [];
                this.isProcessingQueue = false;
                this.retryAttempts = 3;
                this.timeout = 30000; // 30 Ø«Ø§Ù†ÛŒÙ‡
                this.cache = new Map();
                this.cacheTTL = 5 * 60 * 1000; // 5 Ø¯Ù‚ÛŒÙ‚Ù‡
                
                // middlewareÙ‡Ø§
                this.middlewares = {
                    request: [],
                    response: [],
                    error: []
                };
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¨Ú©Ù‡
                this.simulateNetworkConditions = true;
                this.networkDelay = 100; // ms
                this.errorRate = 0; // 0-1
                this.offline = false;
            }
            
            // ============ Ù…ØªØ¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ============
            
            async request(method, endpoint, data = null, options = {}) {
                const url = `${this.baseURL}${endpoint}`;
                const requestId = this.networkLogger.logRequest(method, url, data);
                
                // Ø§Ø¹Ù…Ø§Ù„ middlewareÙ‡Ø§ÛŒ request
                let processedRequest = { method, url, data, headers: { ...this.headers }, ...options };
                processedRequest = await this.runMiddlewares('request', processedRequest);
                
                try {
                    // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø´Ø¨Ú©Ù‡
                    if (this.offline || this.networkLogger.networkStatus === 'offline') {
                        // Ø§Ø¶Ø§ÙÙ‡ Ø¨Ù‡ ØµÙ Ø¢ÙÙ„Ø§ÛŒÙ†
                        this.addToQueue(requestId, processedRequest);
                        throw new Error('Ø´Ø¨Ú©Ù‡ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª');
                    }
                    
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ£Ø®ÛŒØ± Ø´Ø¨Ú©Ù‡
                    if (this.simulateNetworkConditions) {
                        await this.simulateNetworkDelay();
                    }
                    
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø·Ø§
                    if (this.shouldSimulateError()) {
                        throw this.simulateNetworkError();
                    }
                    
                    // Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª
                    const response = await this.executeRequest(requestId, processedRequest);
                    
                    // Ø§Ø¹Ù…Ø§Ù„ middlewareÙ‡Ø§ÛŒ response
                    const processedResponse = await this.runMiddlewares('response', response);
                    
                    this.networkLogger.logResponse(requestId, processedResponse.data, processedResponse.status);
                    
                    // Ú©Ø´ Ú©Ø±Ø¯Ù† Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²
                    if (method === 'GET' && processedResponse.data) {
                        this.cacheResponse(url, processedResponse.data);
                    }
                    
                    return processedResponse;
                    
                } catch (error) {
                    // Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ Ø¨Ø§ retry
                    if (options.retry !== false) {
                        const retryResult = await this.handleRetry(requestId, processedRequest, error);
                        if (retryResult) return retryResult;
                    }
                    
                    // Ø§Ø¹Ù…Ø§Ù„ middlewareÙ‡Ø§ÛŒ error
                    const processedError = await this.runMiddlewares('error', error);
                    
                    this.networkLogger.logError(requestId, processedError, this.getStatusCodeFromError(processedError));
                    
                    throw processedError;
                }
            }
            
            async get(endpoint, params = {}, options = {}) {
                // Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø´
                const url = `${this.baseURL}${endpoint}`;
                const cacheKey = this.generateCacheKey('GET', url, params);
                const cached = this.getFromCache(cacheKey);
                
                if (cached && !options.forceRefresh) {
                    this.networkLogger.logRequest('GET', url, params).status = 'cached';
                    return {
                        data: cached,
                        status: 200,
                        cached: true,
                        timestamp: Date.now()
                    };
                }
                
                const queryString = Object.keys(params).length > 0
                    ? '?' + new URLSearchParams(params).toString()
                    : '';
                
                return this.request('GET', endpoint + queryString, null, options);
            }
            
            async post(endpoint, data, options = {}) {
                return this.request('POST', endpoint, data, options);
            }
            
            async put(endpoint, data, options = {}) {
                return this.request('PUT', endpoint, data, options);
            }
            
            async delete(endpoint, options = {}) {
                return this.request('DELETE', endpoint, null, options);
            }
            
            async patch(endpoint, data, options = {}) {
                return this.request('PATCH', endpoint, data, options);
            }
            
            // ============ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª ============
            
            setAuthToken(token) {
                this.authToken = token;
                this.headers['Authorization'] = `Bearer ${token}`;
                return this;
            }
            
            clearAuth() {
                this.authToken = null;
                delete this.headers['Authorization'];
                return this;
            }
            
            async refreshToken() {
                try {
                    const response = await this.post('/auth/refresh', {}, { retry: false });
                    if (response.data && response.data.token) {
                        this.setAuthToken(response.data.token);
                        return response.data.token;
                    }
                } catch (error) {
                    console.error('Failed to refresh token:', error);
                    throw error;
                }
            }
            
            // ============ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ ============
            
            addToQueue(requestId, request) {
                this.requestQueue.push({
                    id: requestId,
                    request,
                    attempts: 0,
                    maxAttempts: 3,
                    addedAt: Date.now()
                });
                
                console.log(`Added to offline queue: ${request.method} ${request.url}`);
                
                // Ø´Ø±ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø²Ø´ ØµÙ Ø§Ú¯Ø± Ø¢Ù†Ù„Ø§ÛŒÙ† Ø´ÙˆÛŒÙ…
                if (!this.isProcessingQueue && !this.offline) {
                    this.processQueue();
                }
            }
            
            async processQueue() {
                if (this.isProcessingQueue || this.requestQueue.length === 0) return;
                
                this.isProcessingQueue = true;
                console.log(`Processing queue with ${this.requestQueue.length} items`);
                
                while (this.requestQueue.length > 0 && !this.offline) {
                    const queueItem = this.requestQueue[0];
                    
                    try {
                        const result = await this.executeRequest(queueItem.id, queueItem.request);
                        this.networkLogger.logResponse(queueItem.id, result.data, result.status);
                        
                        // Ø­Ø°Ù Ø§Ø² ØµÙ Ù¾Ø³ Ø§Ø² Ù…ÙˆÙÙ‚ÛŒØª
                        this.requestQueue.shift();
                        
                    } catch (error) {
                        queueItem.attempts++;
                        
                        if (queueItem.attempts >= queueItem.maxAttempts) {
                            // Ø­Ø°Ù Ø§Ø² ØµÙ Ù¾Ø³ Ø§Ø² ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚
                            this.networkLogger.logError(queueItem.id, error);
                            this.requestQueue.shift();
                            console.error(`Failed after ${queueItem.attempts} attempts:`, error.message);
                        } else {
                            // Ù…Ù†ØªØ¸Ø± Ù…Ø§Ù†Ø¯Ù† Ø¨Ø±Ø§ÛŒ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯
                            console.log(`Retry ${queueItem.attempts}/${queueItem.maxAttempts} for ${queueItem.request.method} ${queueItem.request.url}`);
                            await this.delay(1000 * queueItem.attempts); // ØªØ§Ø®ÛŒØ± ØªØµØ§Ø¹Ø¯ÛŒ
                        }
                    }
                }
                
                this.isProcessingQueue = false;
                console.log('Queue processing completed');
            }
            
            getQueueStatus() {
                return {
                    length: this.requestQueue.length,
                    items: this.requestQueue.map(item => ({
                        method: item.request.method,
                        url: item.request.url,
                        attempts: item.attempts,
                        addedAt: item.addedAt
                    }))
                };
            }
            
            clearQueue() {
                this.requestQueue = [];
                return this;
            }
            
            // ============ Ú©Ø´ ============
            
            generateCacheKey(method, url, params) {
                return `${method}:${url}:${JSON.stringify(params)}`;
            }
            
            cacheResponse(key, data) {
                this.cache.set(key, {
                    data,
                    timestamp: Date.now()
                });
            }
            
            getFromCache(key) {
                const cached = this.cache.get(key);
                if (!cached) return null;
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†Ù‚Ø¶Ø§
                if (Date.now() - cached.timestamp > this.cacheTTL) {
                    this.cache.delete(key);
                    return null;
                }
                
                return cached.data;
            }
            
            clearCache() {
                this.cache.clear();
                return this;
            }
            
            // ============ Middleware ============
            
            use(type, middleware) {
                if (!this.middlewares[type]) {
                    this.middlewares[type] = [];
                }
                this.middlewares[type].push(middleware);
                
                // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù middleware
                return () => {
                    const index = this.middlewares[type].indexOf(middleware);
                    if (index > -1) {
                        this.middlewares[type].splice(index, 1);
                    }
                };
            }
            
            async runMiddlewares(type, data) {
                let result = data;
                
                for (const middleware of this.middlewares[type]) {
                    try {
                        result = await middleware(result);
                        if (result === null || result === undefined) {
                            throw new Error(`Middleware ${type} returned null/undefined`);
                        }
                    } catch (error) {
                        console.error(`Middleware ${type} error:`, error);
                        throw error;
                    }
                }
                
                return result;
            }
            
            // ============ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¨Ú©Ù‡ ============
            
            async simulateNetworkDelay() {
                let delay = this.networkDelay;
                
                // Ø§ÙØ²Ø§ÛŒØ´ ØªØ£Ø®ÛŒØ± Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ¶Ø¹ÛŒØª Ø´Ø¨Ú©Ù‡
                if (this.networkLogger.networkSpeed === 'slow') {
                    delay *= 3;
                } else if (this.networkLogger.networkSpeed === 'very-slow') {
                    delay *= 10;
                }
                
                // ØªØºÛŒÛŒØ±Ø§Øª ØªØµØ§Ø¯ÙÛŒ
                delay += Math.random() * delay * 0.3; // Â±30%
                
                await this.delay(delay);
            }
            
            shouldSimulateError() {
                if (this.networkLogger.networkStatus === 'error') return true;
                
                // Ù†Ø±Ø® Ø®Ø·Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒ
                return Math.random() < this.errorRate;
            }
            
            simulateNetworkError() {
                const errors = [
                    new Error('Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†Ø´Ø¯'),
                    new Error('Timeout - Ù¾Ø§Ø³Ø® Ø§Ø² Ø³Ø±ÙˆØ± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯'),
                    new Error('Ø³Ø±ÙˆØ± Ø®Ø·Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø¯Ø§Ø¯ (500)'),
                    new Error('Ø¯Ø³ØªØ±Ø³ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø² (401)'),
                    new Error('Ù…Ù†Ø¨Ø¹ ÛŒØ§ÙØª Ù†Ø´Ø¯ (404)')
                ];
                
                return errors[Math.floor(Math.random() * errors.length)];
            }
            
            // ============ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ ============
            
            async executeRequest(requestId, request) {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙˆØ§Ù‚Ø¹ÛŒ
                await this.delay(50 + Math.random() * 100);
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø± Ø§Ø³Ø§Ø³ endpoint
                let response;
                
                switch (request.url) {
                    case `${this.baseURL}/auth/login`:
                        response = this.mockAuthResponse(request);
                        break;
                    case `${this.baseURL}/users/profile`:
                        response = this.mockProfileResponse(request);
                        break;
                    case `${this.baseURL}/lessons`:
                        response = this.mockLessonsResponse(request);
                        break;
                    case `${this.baseURL}/payment/verify`:
                        response = this.mockPaymentResponse(request);
                        break;
                    default:
                        response = this.mockGenericResponse(request);
                }
                
                return response;
            }
            
            mockAuthResponse(request) {
                if (request.data && request.data.email && request.data.password) {
                    return {
                        data: {
                            token: `mock_jwt_token_${Date.now()}`,
                            user: {
                                id: 'user_123',
                                email: request.data.email,
                                name: 'Ú©Ø§Ø±Ø¨Ø± ØªØ³Øª',
                                role: 'user'
                            },
                            expiresIn: 3600
                        },
                        status: 200,
                        headers: {}
                    };
                } else {
                    throw new Error('Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø±Ø§Ø¦Ù‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª');
                }
            }
            
            mockProfileResponse(request) {
                return {
                    data: {
                        id: 'user_123',
                        email: 'test@vakamova.com',
                        name: 'Ú©Ø§Ø±Ø¨Ø± ØªØ³Øª',
                        profile: {
                            level: 'intermediate',
                            completedLessons: 15,
                            streak: 7,
                            points: 1250
                        },
                        preferences: {
                            language: 'fa',
                            notifications: true,
                            theme: 'light'
                        }
                    },
                    status: 200,
                    headers: {}
                };
            }
            
            mockLessonsResponse(request) {
                const lessons = [];
                for (let i = 1; i <= 10; i++) {
                    lessons.push({
                        id: `lesson_${i}`,
                        title: `Ø¯Ø±Ø³ ØªØ³Øª ${i}`,
                        description: `ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¯Ø±Ø³ ØªØ³Øª ${i}`,
                        level: i <= 3 ? 'beginner' : i <= 7 ? 'intermediate' : 'advanced',
                        duration: 10 + i * 5,
                        completed: i <= 5
                    });
                }
                
                return {
                    data: {
                        lessons,
                        pagination: {
                            page: 1,
                            limit: 10,
                            total: 50,
                            pages: 5
                        }
                    },
                    status: 200,
                    headers: {}
                };
            }
            
            mockPaymentResponse(request) {
                return {
                    data: {
                        transactionId: `txn_${Date.now()}`,
                        status: 'completed',
                        amount: 99000,
                        currency: 'IRR',
                        timestamp: new Date().toISOString()
                    },
                    status: 200,
                    headers: {}
                };
            }
            
            mockGenericResponse(request) {
                return {
                    data: {
                        message: 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯',
                        timestamp: new Date().toISOString(),
                        method: request.method,
                        endpoint: request.url.replace(this.baseURL, ''),
                        mock: true
                    },
                    status: 200,
                    headers: {}
                };
            }
            
            async handleRetry(requestId, request, error) {
                for (let attempt = 1; attempt <= this.retryAttempts; attempt++) {
                    console.log(`Retry attempt ${attempt}/${this.retryAttempts} for ${request.method} ${request.url}`);
                    
                    await this.delay(1000 * attempt); // ØªØ§Ø®ÛŒØ± ØªØµØ§Ø¹Ø¯ÛŒ
                    
                    try {
                        // ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯
                        const response = await this.executeRequest(requestId, request);
                        this.networkLogger.logResponse(requestId, response.data, response.status);
                        return response;
                    } catch (retryError) {
                        if (attempt === this.retryAttempts) {
                            throw retryError;
                        }
                    }
                }
                
                return null;
            }
            
            getStatusCodeFromError(error) {
                if (error.message.includes('Ø§ØªØµØ§Ù„')) return 0;
                if (error.message.includes('Timeout')) return 408;
                if (error.message.includes('500')) return 500;
                if (error.message.includes('401')) return 401;
                if (error.message.includes('404')) return 404;
                return 500;
            }
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            // ============ Ú©Ù†ØªØ±Ù„ Ø´Ø¨Ú©Ù‡ ============
            
            setOnline() {
                this.offline = false;
                this.networkLogger.setNetworkStatus('online', 'normal');
                this.processQueue();
                return this;
            }
            
            setOffline() {
                this.offline = true;
                this.networkLogger.setNetworkStatus('offline');
                return this;
            }
            
            setNetworkSlow(speed = 'slow') {
                this.offline = false;
                this.networkLogger.setNetworkStatus('online', speed);
                return this;
            }
            
            setErrorRate(rate) {
                this.errorRate = rate;
                return this;
            }
            
            // ============ ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ… ============
            
            getStatus() {
                return {
                    baseURL: this.baseURL,
                    networkStatus: this.networkLogger.networkStatus,
                    networkSpeed: this.networkLogger.networkSpeed,
                    isAuthenticated: !!this.authToken,
                    queueLength: this.requestQueue.length,
                    cacheSize: this.cache.size,
                    stats: this.networkLogger.getStats()
                };
            }
        }

        // ============ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… API ============
        const API_TEST_SUITES = [
            {
                id: 'api-core',
                name: 'Ù‡Ø³ØªÙ‡ API Client',
                icon: 'ğŸ”§',
                tests: [
                    {
                        id: 'api-basic-request',
                        name: 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø§ÛŒÙ‡ GET',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø³Ø®',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            const response = await apiClient.get('/test');
                            
                            if (!response.data) throw new Error('Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (response.status !== 200) throw new Error(`Status code Ù†Ø§Ø¯Ø±Ø³Øª: ${response.status}`);
                            if (!response.data.message) throw new Error('Ù¾Ø§Ø³Ø® Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ù†ÛŒØ³Øª');
                            
                            return `âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ù…ÙˆÙÙ‚. Ù¾Ø§Ø³Ø®: ${response.data.message}`;
                        }
                    },
                    {
                        id: 'api-post-request',
                        name: 'Ø¯Ø±Ø®ÙˆØ§ POST Ø¨Ø§ Ø¯Ø§Ø¯Ù‡',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø§Ø¯Ù‡ Ø¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            const testData = {
                                name: 'Ø¢Ø²Ù…Ø§ÛŒØ´',
                                value: 123,
                                items: ['Ø¢ÛŒØªÙ… Û±', 'Ø¢ÛŒØªÙ… Û²']
                            };
                            
                            const response = await apiClient.post('/test', testData);
                            
                            if (!response.data) throw new Error('Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (response.data.method !== 'POST') throw new Error('Ù…ØªØ¯ Ù†Ø§Ø¯Ø±Ø³Øª');
                            if (!response.data.endpoint) throw new Error('Endpoint Ø«Ø¨Øª Ù†Ø´Ø¯');
                            
                            return `âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST Ù…ÙˆÙÙ‚. Ø¯Ø§Ø¯Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯: ${JSON.stringify(testData).substring(0, 50)}...`;
                        }
                    },
                    {
                        id: 'api-query-params',
                        name: 'Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Query',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Query Ø¯Ø± GET',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            const params = {
                                page: 1,
                                limit: 20,
                                sort: 'date',
                                order: 'desc',
                                search: 'Ø¢Ù…ÙˆØ²Ø´'
                            };
                            
                            const response = await apiClient.get('/items', params);
                            
                            if (!response.data) throw new Error('Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (!response.data.endpoint) throw new Error('Endpoint Ø«Ø¨Øª Ù†Ø´Ø¯');
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ Ø¯Ø± URL Ø¨Ø§Ø´Ù†Ø¯
                            const expectedUrl = '/items?page=1&limit=20&sort=date&order=desc&search=Ø¢Ù…ÙˆØ²Ø´';
                            if (!response.data.endpoint.includes('?')) {
                                throw new Error('Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Query Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù†Ø¯');
                            }
                            
                            return `âœ… Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Query Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù†Ø¯: ${Object.keys(params).join(', ')}`;
                        }
                    }
                ]
            },
            {
                id: 'api-auth',
                name: 'Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª API',
                icon: 'ğŸ”',
                tests: [
                    {
                        id: 'api-login',
                        name: 'ÙˆØ±ÙˆØ¯ Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù†',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ ÙØ±Ø¢ÛŒÙ†Ø¯ login Ùˆ Ø¯Ø±ÛŒØ§ÙØª JWT token',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            const credentials = {
                                email: 'test@vakamova.com',
                                password: 'Test@1234'
                            };
                            
                            const response = await apiClient.post('/auth/login', credentials);
                            
                            if (!response.data.token) throw new Error('ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (!response.data.user) throw new Error('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (!response.data.user.id) throw new Error('Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            
                            // ØªÙ†Ø¸ÛŒÙ… ØªÙˆÚ©Ù† Ø¯Ø± Ú©Ù„Ø§ÛŒÙ†Øª
                            apiClient.setAuthToken(response.data.token);
                            
                            const status = apiClient.getStatus();
                            if (!status.isAuthenticated) throw new Error('ØªÙˆÚ©Ù† ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯');
                            
                            return `âœ… ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚. ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ (${response.data.token.substring(0, 20)}...)`;
                        }
                    },
                    {
                        id: 'api-authenticated-request',
                        name: 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ ØªÙˆÚ©Ù† Ø§Ø­Ø±Ø§Ø²',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // Ø§ÙˆÙ„ login Ú©Ù†ÛŒÙ…
                            const loginResponse = await apiClient.post('/auth/login', {
                                email: 'test@vakamova.com',
                                password: 'Test@1234'
                            });
                            
                            apiClient.setAuthToken(loginResponse.data.token);
                            
                            // Ø³Ù¾Ø³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ø§Ø­Ø±Ø§Ø²
                            const profileResponse = await apiClient.get('/users/profile');
                            
                            if (!profileResponse.data) throw new Error('Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (!profileResponse.data.email) throw new Error('Ø§ÛŒÙ…ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (!profileResponse.data.profile) throw new Error('Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            
                            return `âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ø§Ø­Ø±Ø§Ø² Ù…ÙˆÙÙ‚. Ú©Ø§Ø±Ø¨Ø±: ${profileResponse.data.email}`;
                        }
                    },
                    {
                        id: 'api-token-clear',
                        name: 'Ø®Ø±ÙˆØ¬ Ùˆ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù†',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ú© Ø´Ø¯Ù† ØªÙˆÚ©Ù† Ù¾Ø³ Ø§Ø² logout',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // login Ùˆ ØªÙ†Ø¸ÛŒÙ… ØªÙˆÚ©Ù†
                            const loginResponse = await apiClient.post('/auth/login', {
                                email: 'test@vakamova.com',
                                password: 'Test@1234'
                            });
                            
                            apiClient.setAuthToken(loginResponse.data.token);
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ ØªÙˆÚ©Ù†
                            let status = apiClient.getStatus();
                            if (!status.isAuthenticated) throw new Error('ØªÙˆÚ©Ù† ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯');
                            
                            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù†
                            apiClient.clearAuth();
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªÙˆÚ©Ù†
                            status = apiClient.getStatus();
                            if (status.isAuthenticated) throw new Error('ØªÙˆÚ©Ù† Ù¾Ø§Ú© Ù†Ø´Ø¯');
                            
                            return 'âœ… ØªÙˆÚ©Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§Ú© Ø´Ø¯';
                        }
                    }
                ]
            },
            {
                id: 'api-network',
                name: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø´Ø¨Ú©Ù‡',
                icon: 'ğŸŒ',
                tests: [
                    {
                        id: 'api-offline-queue',
                        name: 'ØµÙ Ø¢ÙÙ„Ø§ÛŒÙ†',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ù‡Ù†Ú¯Ø§Ù… Ø¢ÙÙ„Ø§ÛŒÙ†',
                        network: true,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // ØªÙ†Ø¸ÛŒÙ… Ø¢ÙÙ„Ø§ÛŒÙ†
                            apiClient.setOffline();
                            
                            // Ø§Ø±Ø³Ø§Ù„ Ú†Ù†Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Ø¨Ø§ÛŒØ¯ Ø¯Ø± ØµÙ Ø°Ø®ÛŒØ±Ù‡ Ø´ÙˆÙ†Ø¯)
                            const promises = [
                                apiClient.get('/offline-test-1'),
                                apiClient.post('/offline-test-2', { data: 'test' }),
                                apiClient.put('/offline-test-3', { update: true })
                            ];
                            
                            // Ù‡Ù…Ù‡ Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ø¨Ø¯Ù‡Ù†Ø¯
                            const results = await Promise.allSettled(promises);
                            const rejected = results.filter(r => r.status === 'rejected');
                            
                            if (rejected.length !== 3) throw new Error('Ù‡Ù…Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯Ù†Ø¯');
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ ØµÙ
                            const queueStatus = apiClient.getQueueStatus();
                            if (queueStatus.length !== 3) throw new Error(`ØµÙ Ø¨Ø§ÛŒØ¯ Û³ Ø¢ÛŒØªÙ… Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø§Ø±Ø¯: ${queueStatus.length}`);
                            
                            // Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø¨Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†
                            apiClient.setOnline();
                            
                            // Ù…Ù†ØªØ¸Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ ØµÙ
                            await apiClient.delay(1000);
                            
                            const finalQueueStatus = apiClient.getQueueStatus();
                            if (finalQueueStatus.length > 0) throw new Error('ØµÙ Ø¨Ø§ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØ´Ø¯');
                            
                            return `âœ… ØµÙ Ø¢ÙÙ„Ø§ÛŒÙ† Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ${queueStatus.length} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯`;
                        }
                    },
                    {
                        id: 'api-retry-mechanism',
                        name: 'Ù…Ú©Ø§Ù†ÛŒØ²Ù… Retry',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚',
                        network: true,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // Ø§ÙØ²Ø§ÛŒØ´ Ù†Ø±Ø® Ø®Ø·Ø§
                            apiClient.setErrorRate(0.8); // 80% Ø®Ø·Ø§
                            
                            let retryCount = 0;
                            
                            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† middleware Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´ retryÙ‡Ø§
                            apiClient.use('request', (request) => {
                                if (request.url.includes('/retry-test')) {
                                    retryCount++;
                                }
                                return request;
                            });
                            
                            try {
                                await apiClient.get('/retry-test', {}, { retry: true });
                                throw new Error('Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯');
                            } catch (error) {
                                // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú†Ù†Ø¯ Ø¨Ø§Ø± ØªÙ„Ø§Ø´ Ø´Ø¯Ù‡
                                const expectedMinRetries = 2; // Ø§Ø¨ØªØ¯Ø§ÛŒÛŒ + Ø­Ø¯Ø§Ù‚Ù„ Û² retry
                                if (retryCount < expectedMinRetries) {
                                    throw new Error(`ØªØ¹Ø¯Ø§Ø¯ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ Ú©Ù… Ø§Ø³Øª: ${retryCount}`);
                                }
                            }
                            
                            // Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                            apiClient.setErrorRate(0);
                            
                            return `âœ… Ù…Ú©Ø§Ù†ÛŒØ²Ù… Retry Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ØªØ¹Ø¯Ø§Ø¯ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§: ${retryCount}`;
                        }
                    },
                    {
                        id: 'api-timeout',
                        name: 'Ù…Ø¯ÛŒØ±ÛŒØª Timeout',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ù‚Ø·Ø¹ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ',
                        network: true,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // ØªÙ†Ø¸ÛŒÙ… timeout Ú©ÙˆØªØ§Ù‡
                            const originalTimeout = apiClient.timeout;
                            apiClient.timeout = 100; // 100ms
                            
                            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ£Ø®ÛŒØ± Ø·ÙˆÙ„Ø§Ù†ÛŒ
                            apiClient.use('request', async (request) => {
                                if (request.url.includes('/slow-endpoint')) {
                                    await apiClient.delay(500); // Ø¨ÛŒØ´ØªØ± Ø§Ø² timeout
                                }
                                return request;
                            });
                            
                            try {
                                await apiClient.get('/slow-endpoint');
                                throw new Error('Ø¨Ø§ÛŒØ¯ timeout Ù…ÛŒâ€ŒØ®ÙˆØ±Ø¯');
                            } catch (error) {
                                if (!error.message.includes('Timeout')) {
                                    throw new Error(`Ø®Ø·Ø§ÛŒ Ù†Ø§Ø¯Ø±Ø³Øª: ${error.message}`);
                                }
                            } finally {
                                // Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ timeout
                                apiClient.timeout = originalTimeout;
                            }
                            
                            return 'âœ… Ù…Ø¯ÛŒØ±ÛŒØª Timeout Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯';
                        }
                    }
                ]
            },
            {
                id: 'api-error',
                name: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§',
                icon: 'âš ï¸',
                tests: [
                    {
                        id: 'api-http-errors',
                        name: 'Ø®Ø·Ø§Ù‡Ø§ÛŒ HTTP',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ÛŒ 4xx Ùˆ 5xx',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // ØªØ³Øª Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
                            const errorTests = [
                                { endpoint: '/not-found', expectedError: 'ÛŒØ§ÙØª Ù†Ø´Ø¯' },
                                { endpoint: '/unauthorized', expectedError: 'ØºÛŒØ±Ù…Ø¬Ø§Ø²' },
                                { endpoint: '/server-error', expectedError: 'Ø¯Ø§Ø®Ù„ÛŒ' }
                            ];
                            
                            for (const test of errorTests) {
                                try {
                                    await apiClient.get(test.endpoint);
                                    throw new Error(`Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ ${test.endpoint}`);
                                } catch (error) {
                                    if (!error.message.includes(test.expectedError)) {
                                        throw new Error(`Ø®Ø·Ø§ÛŒ Ù†Ø§Ø¯Ø±Ø³Øª Ø¨Ø±Ø§ÛŒ ${test.endpoint}: ${error.message}`);
                                    }
                                }
                            }
                            
                            return 'âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ÛŒ HTTP Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯';
                        }
                    },
                    {
                        id: 'api-network-errors',
                        name: 'Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ù‚Ø·Ø¹ÛŒ Ø´Ø¨Ú©Ù‡ Ùˆ Ø§ØªØµØ§Ù„',
                        network: true,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†
                            apiClient.setOffline();
                            
                            try {
                                await apiClient.get('/network-test');
                                throw new Error('Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø¯');
                            } catch (error) {
                                if (!error.message.includes('Ø´Ø¨Ú©Ù‡')) {
                                    throw new Error(`Ø®Ø·Ø§ÛŒ Ù†Ø§Ø¯Ø±Ø³Øª: ${error.message}`);
                                }
                            }
                            
                            // Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†
                            apiClient.setOnline();
                            
                            // Ø­Ø§Ù„Ø§ Ø¨Ø§ÛŒØ¯ Ú©Ø§Ø± Ú©Ù†Ø¯
                            const response = await apiClient.get('/network-test');
                            if (!response.data) throw new Error('Ù¾Ø³ Ø§Ø² Ø¢Ù†Ù„Ø§ÛŒÙ† Ø´Ø¯Ù† Ø¨Ø§ÛŒØ¯ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒÚ¯Ø±ÙØª');
                            
                            return 'âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯';
                        }
                    },
                    {
                        id: 'api-error-middleware',
                        name: 'Middleware Ø®Ø·Ø§',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ middleware Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            let errorHandled = false;
                            let errorTransformed = false;
                            
                            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† middleware Ø®Ø·Ø§
                            apiClient.use('error', (error) => {
                                errorHandled = true;
                                
                                // ØªØ¨Ø¯ÛŒÙ„ Ø®Ø·Ø§ Ø¨Ù‡ ÙØ±Ù…Øª Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
                                const transformedError = new Error(`[API Error] ${error.message}`);
                                transformedError.code = error.message.includes('404') ? 'NOT_FOUND' : 'UNKNOWN';
                                transformedError.originalError = error;
                                
                                errorTransformed = true;
                                return transformedError;
                            });
                            
                            try {
                                await apiClient.get('/some-error-endpoint');
                                throw new Error('Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯');
                            } catch (error) {
                                if (!errorHandled) throw new Error('Middleware Ø®Ø·Ø§ Ø§Ø¬Ø±Ø§ Ù†Ø´Ø¯');
                                if (!errorTransformed) throw new Error('Ø®Ø·Ø§ transform Ù†Ø´Ø¯');
                                if (!error.message.startsWith('[API Error]')) throw new Error('Ø®Ø·Ø§ format Ù†Ø´Ø¯');
                                if (!error.code) throw new Error('Ú©Ø¯ Ø®Ø·Ø§ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯');
                            }
                            
                            return 'âœ… middleware Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯';
                        }
                    }
                ]
            },
            {
                id: 'api-performance',
                name: 'ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯',
                icon: 'âš¡',
                tests: [
                    {
                        id: 'api-caching',
                        name: 'Ø³ÛŒØ³ØªÙ… Ú©Ø´',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø´ Ú©Ø±Ø¯Ù† Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ù‡ØªØ±',
                        network: false,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // Ø§ÙˆÙ„ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø³Ø±ÙˆØ± Ø¨ÛŒØ§ÛŒØ¯)
                            const startTime1 = performance.now();
                            const response1 = await apiClient.get('/cached-endpoint', { param: 'test' });
                            const duration1 = performance.now() - startTime1;
                            
                            if (response1.cached) throw new Error('Ù¾Ø§Ø³Ø® Ø§ÙˆÙ„ Ù†Ø¨Ø§ÛŒØ¯ cached Ø¨Ø§Ø´Ø¯');
                            
                            // Ø¯ÙˆÙ…ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Ø¨Ø§ÛŒØ¯ Ø§Ø² Ú©Ø´ Ø¨ÛŒØ§ÛŒØ¯)
                            const startTime2 = performance.now();
                            const response2 = await apiClient.get('/cached-endpoint', { param: 'test' });
                            const duration2 = performance.now() - startTime2;
                            
                            if (!response2.cached) throw new Error('Ù¾Ø§Ø³Ø® Ø¯ÙˆÙ… Ø¨Ø§ÛŒØ¯ cached Ø¨Ø§Ø´Ø¯');
                            
                            // Ø¨Ø§ÛŒØ¯ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø¨Ø§Ø´Ø¯
                            const speedup = duration1 / duration2;
                            if (speedup < 1.5) {
                                console.warn(`Ú©Ø´ ØªØ£Ø«ÛŒØ± Ú©Ù…ÛŒ Ø¯Ø§Ø´Øª: ${speedup.toFixed(2)}x Ø³Ø±ÛŒØ¹â€ŒØªØ±`);
                            }
                            
                            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø´
                            apiClient.clearCache();
                            
                            // Ø³ÙˆÙ…ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Ø¨Ø§ÛŒØ¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ø² Ø³Ø±ÙˆØ± Ø¨ÛŒØ§ÛŒØ¯)
                            const response3 = await apiClient.get('/cached-endpoint', { param: 'test' });
                            if (response3.cached) throw new Error('Ù¾Ø³ Ø§Ø² Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø´ Ù†Ø¨Ø§ÛŒØ¯ cached Ø¨Ø§Ø´Ø¯');
                            
                            return `âœ… Ø³ÛŒØ³ØªÙ… Ú©Ø´ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø³Ø±Ø¹Øª: ${speedup.toFixed(2)}x Ø¨Ù‡Ø¨ÙˆØ¯`;
                        }
                    },
                    {
                        id: 'api-parallel-requests',
                        name: 'Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ§Ø²ÛŒ',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù‡Ù…Ø²Ù…Ø§Ù†',
                        network: true,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            const numRequests = 10;
                            
                            const startTime = performance.now();
                            
                            // Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ§Ø²ÛŒ
                            const promises = [];
                            for (let i = 0; i < numRequests; i++) {
                                promises.push(
                                    apiClient.get(`/parallel-test-${i}`, { index: i })
                                );
                            }
                            
                            const results = await Promise.all(promises);
                            const totalTime = performance.now() - startTime;
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªØ§ÛŒØ¬
                            const successful = results.filter(r => r.status === 200).length;
                            if (successful !== numRequests) throw new Error(`ØªÙ†Ù‡Ø§ ${successful} Ø§Ø² ${numRequests} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯Ù†Ø¯`);
                            
                            // Ø²Ù…Ø§Ù† Ø¨Ø§ÛŒØ¯ Ù…Ù†Ø·Ù‚ÛŒ Ø¨Ø§Ø´Ø¯ (Ù†Ù‡ Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ØŒ Ù†Ù‡ Ø®ÛŒÙ„ÛŒ Ú©Ù†Ø¯)
                            const avgTimePerRequest = totalTime / numRequests;
                            
                            if (avgTimePerRequest < 10) {
                                console.warn('Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ Ù…Ù…Ú©Ù† Ø§Ø³Øª ØºÛŒØ±ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§Ø´Ù†Ø¯');
                            } else if (avgTimePerRequest > 500) {
                                throw new Error(`Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¶Ø¹ÛŒÙ: ${avgTimePerRequest.toFixed(2)}ms Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª`);
                            }
                            
                            return `âœ… ${numRequests} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÙˆØ§Ø²ÛŒ Ø¯Ø± ${totalTime.toFixed(2)}ms (${avgTimePerRequest.toFixed(2)}ms/request)`;
                        }
                    },
                    {
                        id: 'api-batch-operations',
                        name: 'Ø¹Ù…Ù„ÛŒØ§Øª Ø¯Ø³ØªÙ‡â€ŒØ§ÛŒ',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø¬ÛŒÙ…',
                        network: true,
                        run: async () => {
                            const apiClient = new MockAPIClient();
                            
                            // Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…
                            const largeData = {
                                items: []
                            };
                            
                            for (let i = 0; i < 1000; i++) {
                                largeData.items.push({
                                    id: i,
                                    name: `Ø¢ÛŒØªÙ… ${i}`,
                                    data: 'x'.repeat(100), // 100 Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¢ÛŒØªÙ…
                                    timestamp: new Date().toISOString()
                                });
                            }
                            
                            const startTime = performance.now();
                            const response = await apiClient.post('/batch', largeData);
                            const duration = performance.now() - startTime;
                            
                            if (!response.data) throw new Error('Ù¾Ø§Ø³Ø® Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                            if (response.data.method !== 'POST') throw new Error('Ù…ØªØ¯ Ù†Ø§Ø¯Ø±Ø³Øª');
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø¯Ø§Ø¯Ù‡
                            const dataSize = JSON.stringify(largeData).length;
                            const dataSizeKB = (dataSize / 1024).toFixed(2);
                            
                            // Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯
                            if (duration > 5000) {
                                throw new Error(`Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¶Ø¹ÛŒÙ Ø¨Ø±Ø§ÛŒ ${dataSizeKB}KB Ø¯Ø§Ø¯Ù‡: ${duration.toFixed(2)}ms`);
                            } else if (duration > 2000) {
                                console.warn(`Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù‚Ø§Ø¨Ù„ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¨Ø±Ø§ÛŒ ${dataSizeKB}KB Ø¯Ø§Ø¯Ù‡: ${duration.toFixed(2)}ms`);
                            }
                            
                            return `âœ… Ø¹Ù…Ù„ÛŒØ§Øª Ø¯Ø³ØªÙ‡â€ŒØ§ÛŒ Ø¨Ø§ ${largeData.items.length} Ø¢ÛŒØªÙ… (${dataSizeKB}KB) Ø¯Ø± ${duration.toFixed(2)}ms`;
                        }
                    }
                ]
            }
        ];

        // ============ Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª ØªØ³Øªâ€ŒÙ‡Ø§ ============
        class APITestManager {
            constructor() {
                this.logger = new NetworkLogger();
                this.apiClient = new MockAPIClient();
                this.results = new Map();
                this.totalTests = 0;
                this.completedTests = 0;
                this.networkTests = 0;
                this.requestCount = 0;
                
                this.calculateStats();
                this.renderTests();
                this.setupEventListeners();
                this.updateDisplay();
                this.initializeSimulator();
                this.updateNetworkIndicator();
            }
            
            calculateStats() {
                this.totalTests = API_TEST_SUITES.reduce(
                    (sum, suite) => sum + suite.tests.length, 0
                );
                this.networkTests = API_TEST_SUITES.reduce(
                    (sum, suite) => sum + suite.tests.filter(t => t.network).length, 0
                );
            }
            
            renderTests() {
                const container = document.getElementById('test-container');
                container.innerHTML = '';
                
                API_TEST_SUITES.forEach(suite => {
                    const section = document.createElement('div');
                    section.className = 'test-section';
                    section.innerHTML = `
                        <h2><span>${suite.icon}</span> ${suite.name}</h2>
                        <div id="suite-${suite.id}">
                            ${suite.tests.map(test => `
                                <div class="test-item ${test.network ? 'network' : ''}" id="test-${test.id}">
                                    <div class="test-header">
                                        <div class="test-title">
                                            ${test.name}
                                            ${test.network ? '<span class="test-network">Ø´Ø¨Ú©Ù‡</span>' : ''}
                                        </div>
                                        <div class="test-status status-pending">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
                                    </div>
                                    <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 8px;">
                                        ${test.description}
                                    </div>
                                    <div class="test-output" id="output-${test.id}" style="display: none;"></div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    container.appendChild(section);
                });
            }
            
            setupEventListeners() {
                document.getElementById('run-tests').addEventListener('click', () => {
                    this.runAllTests();
                });
                
                document.getElementById('run-network').addEventListener('click', () => {
                    this.runNetworkTests();
                });
                
                document.getElementById('clear-results').addEventListener('click', () => {
                    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) {
                        this.clearResults();
                    }
                });
                
                document.getElementById('export-results').addEventListener('click', () => {
                    this.exportResults();
                });
            }
            
            async runAllTests() {
                const runButton = document.getElementById('run-tests');
                runButton.disabled = true;
                runButton.innerHTML = '<span class="loading"></span> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...';
                
                this.logger.setNetworkStatus('online', 'normal');
                this.updateNetworkIndicator();
                
                this.logger.logs.push({
                    type: 'test_start',
                    timestamp: new Date().toISOString(),
                    message: 'Ø´Ø±ÙˆØ¹ Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… API'
                });
                
                console.log('ğŸš€ Ø´Ø±ÙˆØ¹ Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… API');
                
                for (const suite of API_TEST_SUITES) {
                    console.log(`ğŸ“‚ Ø´Ø±ÙˆØ¹ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ${suite.name}`);
                    for (const test of suite.tests) {
                        await this.runSingleTest(test);
                    }
                }
                
                runButton.disabled = false;
                runButton.innerHTML = '<span>ğŸš€</span> Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¬Ø¯Ø¯ ØªØ³Øªâ€ŒÙ‡Ø§';
                
                this.showSummary();
            }
            
            async runNetworkTests() {
                const networkButton = document.getElementById('run-network');
                networkButton.disabled = true;
                networkButton.innerHTML = '<span class="loading"></span> ØªØ³Øª Ø´Ø¨Ú©Ù‡...';
                
                this.logger.setNetworkStatus('online', 'normal');
                this.updateNetworkIndicator();
                
                this.logger.logs.push({
                    type: 'network_test_start',
                    timestamp: new Date().toISOString(),
                    message: 'Ø´Ø±ÙˆØ¹ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡ ÙˆÛŒÚ˜Ù‡'
                });
                
                console.log('ğŸŒ Ø´Ø±ÙˆØ¹ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡ ÙˆÛŒÚ˜Ù‡');
                
                for (const suite of API_TEST_SUITES) {
                    for (const test of suite.tests.filter(t => t.network)) {
                        await this.runSingleTest(test);
                    }
                }
                
                networkButton.disabled = false;
                networkButton.innerHTML = '<span>ğŸŒ</span> ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡';
                
                this.showPerformanceChart();
            }
            
            async runSingleTest(test) {
                const testElement = document.getElementById(`test-${test.id}`);
                const statusElement = testElement.querySelector('.test-status');
                const outputElement = document.getElementById(`output-${test.id}`);
                
                // Ø±ÛŒØ³Øª ÙˆØ¶Ø¹ÛŒØª
                testElement.className = `test-item ${test.network ? 'network' : ''}`;
                statusElement.className = 'test-status status-pending';
                statusElement.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...';
                outputElement.style.display = 'none';
                
                try {
                    const startTime = performance.now();
                    const result = await test.run();
                    const duration = performance.now() - startTime;
                    
                    // Ù…ÙˆÙÙ‚
                    testElement.classList.add('passed');
                    statusElement.className = 'test-status status-passed';
                    statusElement.textContent = `Ù…ÙˆÙÙ‚ (${duration.toFixed(0)}ms)`;
                    outputElement.textContent = result;
                    outputElement.className = 'test-output success';
                    outputElement.style.display = 'block';
                    
                    this.results.set(test.id, { 
                        success: true, 
                        result,
                        duration,
                        network: test.network 
                    });
                    
                    this.logger.logs.push({
                        type: 'test_pass',
                        timestamp: new Date().toISOString(),
                        test: test.name,
                        duration,
                        result
                    });
                    
                    console.log(`âœ… ØªØ³Øª "${test.name}" Ù…ÙˆÙÙ‚ Ø¯Ø± ${duration.toFixed(2)}ms`);
                    
                } catch (error) {
                    // Ø´Ú©Ø³Øª
                    testElement.classList.add('failed');
                    statusElement.className = 'test-status status-failed';
                    statusElement.textContent = 'Ù†Ø§Ù…ÙˆÙÙ‚';
                    outputElement.textContent = `Ø®Ø·Ø§: ${error.message}\n${error.stack || ''}`;
                    outputElement.className = 'test-output error';
                    outputElement.style.display = 'block';
                    
                    this.results.set(test.id, { 
                        success: false, 
                        error: error.message,
                        network: test.network 
                    });
                    
                    this.logger.logs.push({
                        type: 'test_fail',
                        timestamp: new Date().toISOString(),
                        test: test.name,
                        error: error.message
                    });
                    
                    console.error(`âŒ ØªØ³Øª "${test.name}" Ù†Ø§Ù…ÙˆÙÙ‚:`, error);
                }
                
                this.completedTests++;
                this.updateDisplay();
            }
            
            updateDisplay() {
                const passed = Array.from(this.results.values()).filter(r => r.success).length;
                const failed = Array.from(this.results.values()).filter(r => !r.success).length;
                const networkPassed = Array.from(this.results.values())
                    .filter(r => r.network && r.success).length;
                const pending = this.totalTests - this.completedTests;
                const stats = this.logger.getStats();
                
                document.getElementById('passed-count').textContent = passed;
                document.getElementById('failed-count').textContent = failed;
                document.getElementById('network-count').textContent = networkPassed;
                document.getElementById('request-count').textContent = stats.totalRequests;
                document.getElementById('pending-count').textContent = pending;
            }
            
            clearResults() {
                this.results.clear();
                this.completedTests = 0;
                this.logger.clear();
                this.apiClient = new MockAPIClient();
                this.renderTests();
                this.updateDisplay();
                this.updateAPIVisualizer();
                this.updateNetworkIndicator();
                
                console.log('ğŸ§¹ Ù†ØªØ§ÛŒØ¬ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯');
                
                document.getElementById('current-response').textContent = 'Ù‡ÛŒÚ† Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡';
            }
            
            exportResults() {
                const results = {
                    timestamp: new Date().toISOString(),
                    system: 'API Client & Sync System',
                    totalTests: this.totalTests,
                    completedTests: this.completedTests,
                    networkTests: this.networkTests,
                    results: Object.fromEntries(this.results),
                    logs: this.logger.logs,
                    stats: this.logger.getStats(),
                    apiStatus: this.apiClient.getStatus()
                };
                
                const dataStr = JSON.stringify(results, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `vakamova-api-test-${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                console.log('ğŸ’¾ Ù†ØªØ§ÛŒØ¬ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
            }
            
            showSummary() {
                const passed = Array.from(this.results.values()).filter(r => r.success).length;
                const failed = this.completedTests - passed;
                const networkPassed = Array.from(this.results.values())
                    .filter(r => r.network && r.success).length;
                const successRate = ((passed / this.totalTests) * 100).toFixed(1);
                
                const stats = this.logger.getStats();
                const avgResponseTime = stats.avgDuration.toFixed(2);
                
                const summary = `
ğŸ¯ Ø®Ù„Ø§ØµÙ‡ Ù†ØªØ§ÛŒØ¬ ØªØ³Øª API Ùˆ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ:
âœ… Ù…ÙˆÙÙ‚: ${passed} Ø§Ø² ${this.totalTests}
âŒ Ù†Ø§Ù…ÙˆÙÙ‚: ${failed}
ğŸŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡: ${networkPassed} Ø§Ø² ${this.networkTests}
ğŸ“Š Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª: ${successRate}%
â±ï¸ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®: ${avgResponseTime}ms
ğŸ“¡ Ú©Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§: ${stats.totalRequests}
                `.trim();
                
                console.log(summary);
                
                // Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ù„Ø§Ù†
                if (failed === 0 && networkPassed === this.networkTests) {
                    alert(`ğŸ‰ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ø§Ù…Ù„!\n${summary}`);
                } else if (failed > 0) {
                    alert(`âš ï¸ ${failed} ØªØ³Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¯Ø§Ø´ØªÛŒÙ….\n${summary}`);
                }
            }
            
            showPerformanceChart() {
                const performanceResults = Array.from(this.results.values())
                    .filter(r => r.network && r.duration)
                    .slice(-5);
                
                if (performanceResults.length === 0) return;
                
                const maxDuration = Math.max(...performanceResults.map(r => r.duration));
                
                let chartHTML = '<div class="performance-chart"><h4>ğŸ“Š Ù†Ù…ÙˆØ¯Ø§Ø± Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø´Ø¨Ú©Ù‡</h4>';
                
                performanceResults.forEach((result, index) => {
                    const width = (result.duration / maxDuration) * 100;
                    chartHTML += `
                        <div class="chart-label">
                            <span>ØªØ³Øª Ø´Ø¨Ú©Ù‡ ${index + 1}</span>
                            <span>${result.duration.toFixed(2)}ms</span>
                        </div>
                        <div class="chart-bar" style="width: ${width}%"></div>
                    `;
                });
                
                chartHTML += '</div>';
                
                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø§ÙˆÙ„ÛŒÙ† ØªØ³Øª Ø´Ø¨Ú©Ù‡
                const firstNetworkTest = document.querySelector('.test-item.network');
                if (firstNetworkTest) {
                    const existingChart = firstNetworkTest.querySelector('.performance-chart');
                    if (existingChart) existingChart.remove();
                    firstNetworkTest.insertAdjacentHTML('beforeend', chartHTML);
                }
            }
            
            // ============ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² ============
            
            initializeSimulator() {
                this.simulatorAPI = new MockAPIClient();
                this.updateAPIVisualizer();
            }
            
            updateAPIVisualizer() {
                const visualizer = document.getElementById('api-visualizer');
                const recentRequests = this.logger.getRecentRequests(5);
                
                if (recentRequests.length === 0) {
                    visualizer.innerHTML = `{
  "system": "api-simulator",
  "status": "ready",
  "requests": []
}`;
                    return;
                }
                
                let html = '<div style="color: #94a3b8;">// Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§:</div><br>';
                
                recentRequests.forEach((request, index) => {
                    const methodColor = request.method === 'GET' ? '#10b981' :
                                      request.method === 'POST' ? '#3b82f6' :
                                      request.method === 'PUT' ? '#f59e0b' :
                                      request.method === 'DELETE' ? '#ef4444' : '#8b5cf6';
                    
                    html += `<div style="margin-bottom: 10px;">`;
                    html += `<span style="color: ${methodColor}; font-weight: bold;">${request.method}</span> `;
                    html += `<span class="request">${request.url}</span><br>`;
                    
                    if (request.status === 'completed') {
                        html += `<span style="color: #34d399;">âœ… ${request.statusCode} - ${request.duration.toFixed(2)}ms</span>`;
                    } else if (request.status === 'error') {
                        html += `<span class="error">âŒ ${request.statusCode || 'Error'} - ${request.error.message}</span>`;
                    } else {
                        html += `<span style="color: #f59e0b;">â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªØ¸Ø§Ø±...</span>`;
                    }
                    
                    html += `</div>`;
                });
                
                visualizer.innerHTML = html;
            }
            
            updateNetworkIndicator() {
                const indicator = document.getElementById('network-indicator');
                const statusText = document.getElementById('network-status-text');
                const stats = this.logger.getStats();
                
                indicator.className = 'status-indicator';
                
                switch (stats.networkStatus) {
                    case 'online':
                        indicator.classList.add(stats.networkSpeed === 'normal' ? 'status-online' : 'status-slow');
                        statusText.textContent = stats.networkSpeed === 'normal' 
                            ? 'Ø¢Ù†Ù„Ø§ÛŒÙ† - Ø³Ø±Ø¹Øª Ø¹Ø§Ø¯ÛŒ' 
                            : `Ø¢Ù†Ù„Ø§ÛŒÙ† - Ø³Ø±Ø¹Øª ${stats.networkSpeed}`;
                        break;
                    case 'offline':
                        indicator.classList.add('status-offline');
                        statusText.textContent = 'Ø¢ÙÙ„Ø§ÛŒÙ†';
                        break;
                    case 'error':
                        indicator.classList.add('status-offline');
                        statusText.textContent = 'Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡';
                        break;
                }
            }
            
            async simulateGetRequest() {
                try {
                    document.getElementById('current-response').innerHTML = 
                        '<span style="color: #f59e0b;">â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET...</span>';
                    
                    const response = await this.simulatorAPI.get('/test/simulate');
                    
                    document.getElementById('current-response').innerHTML = 
                        `<span style="color: #10b981;">âœ… Ù…ÙˆÙÙ‚ - Ú©Ø¯: ${response.status}</span><br>
                         <small>${JSON.stringify(response.data).substring(0, 100)}...</small>`;
                    
                } catch (error) {
                    document.getElementById('current-response').innerHTML = 
                        `<span style="color: #ef4444;">âŒ Ø®Ø·Ø§: ${error.message}</span>`;
                }
                
                this.updateAPIVisualizer();
                this.updateDisplay();
            }
            
            async simulatePostRequest() {
                try {
                    document.getElementById('current-response').innerHTML = 
                        '<span style="color: #f59e0b;">â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST...</span>';
                    
                    const data = {
                        action: 'simulate',
                        timestamp: new Date().toISOString(),
                        data: { test: 'Ù…Ù‚Ø¯Ø§Ø± ØªØ³ØªÛŒ' }
                    };
                    
                    const response = await this.simulatorAPI.post('/test/simulate', data);
                    
                    document.getElementById('current-response').innerHTML = 
                        `<span style="color: #10b981;">âœ… Ù…ÙˆÙÙ‚ - Ú©Ø¯: ${response.status}</span><br>
                         <small>Ø¯Ø§Ø¯Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ Ùˆ Ù¾Ø§Ø³Ø® Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯</small>`;
                    
                } catch (error) {
                    document.getElementById('current-response').innerHTML = 
                        `<span style="color: #ef4444;">âŒ Ø®Ø·Ø§: ${error.message}</span>`;
                }
                
                this.updateAPIVisualizer();
                this.updateDisplay();
            }
            
            async simulateErrorRequest() {
                try {
                    document.getElementById('current-response').innerHTML = 
                        '<span style="color: #f59e0b;">â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ø®Ø·Ø§...</span>';
                    
                    // ØªÙ†Ø¸ÛŒÙ… Ø®Ø·Ø§
                    this.simulatorAPI.setErrorRate(1); // 100% Ø®Ø·Ø§
                    
                    await this.simulatorAPI.get('/error-endpoint');
                    
                    document.getElementById('current-response').innerHTML = 
                        '<span style="color: #ef4444;">âŒ Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯ Ø§Ù…Ø§ Ù†Ø¯Ø§Ø¯!</span>';
                    
                } catch (error) {
                    document.getElementById('current-response').innerHTML = 
                        `<span style="color: #ef4444;">âœ… Ø®Ø·Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ø´Ø¯: ${error.message}</span>`;
                } finally {
                    // Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                    this.simulatorAPI.setErrorRate(0);
                }
                
                this.updateAPIVisualizer();
                this.updateDisplay();
            }
            
            async simulateAuthRequest() {
                try {
                    document.getElementById('current-response').innerHTML = 
                        '<span style="color: #f59e0b;">â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª...</span>';
                    
                    const response = await this.simulatorAPI.post('/auth/login', {
                        email: 'simulator@vakamova.com',
                        password: 'Simulator@123'
                    });
                    
                    if (response.data.token) {
                        this.simulatorAPI.setAuthToken(response.data.token);
                        
                        document.getElementById('current-response').innerHTML = 
                            `<span style="color: #10b981;">âœ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù…ÙˆÙÙ‚</span><br>
                             <small>ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯: ${response.data.token.substring(0, 30)}...</small>`;
                    } else {
                        throw new Error('ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    }
                    
                } catch (error) {
                    document.getElementById('current-response').innerHTML = 
                        `<span style="color: #ef4444;">âŒ Ø®Ø·Ø§ÛŒ Ø§Ø­Ø±Ø§Ø²: ${error.message}</span>`;
                }
                
                this.updateAPIVisualizer();
                this.updateDisplay();
            }
            
            setNetworkOnline() {
                this.simulatorAPI.setOnline();
                this.logger.setNetworkStatus('online', 'normal');
                this.updateNetworkIndicator();
                document.getElementById('current-response').textContent = 'Ø´Ø¨Ú©Ù‡ Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¢Ù†Ù„Ø§ÛŒÙ† ØªØºÛŒÛŒØ± Ú©Ø±Ø¯';
            }
            
            setNetworkOffline() {
                this.simulatorAPI.setOffline();
                this.logger.setNetworkStatus('offline');
                this.updateNetworkIndicator();
                document.getElementById('current-response').textContent = 'Ø´Ø¨Ú©Ù‡ Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† ØªØºÛŒÛŒØ± Ú©Ø±Ø¯';
            }
            
            setNetworkSlow() {
                this.simulatorAPI.setNetworkSlow('slow');
                this.logger.setNetworkStatus('online', 'slow');
                this.updateNetworkIndicator();
                document.getElementById('current-response').textContent = 'Ø´Ø¨Ú©Ù‡ Ø¨Ù‡ Ø­Ø§Ù„Øª Ú©Ù†Ø¯ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯';
            }
        }

        // ============ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ùˆ ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ ============
        let apiTestManager;

        document.addEventListener('DOMContentLoaded', () => {
            apiTestManager = new APITestManager();
            console.log('âœ… Ø³ÛŒØ³ØªÙ… ØªØ³Øª API Ùˆ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Vakamova Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª');
        });

        // ØªÙˆØ§Ø¨Ø¹ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ HTML
        window.simulateGetRequest = () => apiTestManager.simulateGetRequest();
        window.simulatePostRequest = () => apiTestManager.simulatePostRequest();
        window.simulateErrorRequest = () => apiTestManager.simulateErrorRequest();
        window.simulateAuthRequest = () => apiTestManager.simulateAuthRequest();
        window.setNetworkOnline = () => apiTestManager.setNetworkOnline();
        window.setNetworkOffline = () => apiTestManager.setNetworkOffline();
        window.setNetworkSlow = () => apiTestManager.setNetworkSlow();
    </script>
</body>
  </html>
